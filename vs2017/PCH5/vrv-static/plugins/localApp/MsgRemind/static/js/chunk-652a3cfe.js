(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-652a3cfe"],{"0481":function(e,t,n){"use strict";var a=n("23e7"),r=n("a2bf"),i=n("7b0b"),s=n("50c4"),l=n("a691"),o=n("65f0");a({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=i(this),n=s(t.length),a=o(t,0);return a.length=r(a,t,t,n,0,void 0===e?1:l(e)),a}})},"1aae":function(e,t,n){"use strict";var a=n("a341"),r=n.n(a);r.a},"3ca3":function(e,t,n){"use strict";var a=n("6547").charAt,r=n("69f3"),i=n("7dd0"),s="String Iterator",l=r.set,o=r.getterFor(s);i(String,"String",(function(e){l(this,{type:s,string:String(e),index:0})}),(function(){var e,t=o(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=a(n,r),t.index+=e.length,{value:e,done:!1})}))},4069:function(e,t,n){var a=n("44d2");a("flat")},4290:function(e,t,n){"use strict";var a=n("42b5"),r=n.n(a);r.a},"42b5":function(e,t,n){},a2bf:function(e,t,n){"use strict";var a=n("e8b5"),r=n("50c4"),i=n("f8c2"),s=function(e,t,n,l,o,d,c,u){var v,f=o,h=0,p=!!c&&i(c,u,3);while(h<l){if(h in n){if(v=p?p(n[h],h,t):n[h],d>0&&a(v))f=s(e,t,v,r(v.length),f,d-1)-1;else{if(f>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[f]=v}f++}h++}return f};e.exports=s},a341:function(e,t,n){},c740:function(e,t,n){"use strict";var a=n("23e7"),r=n("b727").findIndex,i=n("44d2"),s="findIndex",l=!0;s in[]&&Array(1)[s]((function(){l=!1})),a({target:"Array",proto:!0,forced:l},{findIndex:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),i(s)},ddb0:function(e,t,n){var a=n("da84"),r=n("fdbc"),i=n("e260"),s=n("9112"),l=n("b622"),o=l("iterator"),d=l("toStringTag"),c=i.values;for(var u in r){var v=a[u],f=v&&v.prototype;if(f){if(f[o]!==c)try{s(f,o,c)}catch(p){f[o]=c}if(f[d]||s(f,d,u),r[u])for(var h in i)if(f[h]!==i[h])try{s(f,h,i[h])}catch(p){f[h]=i[h]}}}},f611:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"calendar-wrap",style:"--space-between-cols: "+e.colsSpace},[n("div",{staticClass:"sticky-top"},[n("ul",{staticClass:"days"},e._l(e.days||[],(function(t,a){var r=t.value;return n("li",{key:a,staticClass:"day-indicator",class:{today:e._isToday(r),"is-before":e.isBefore(r)}},[n("div",[n("span",{staticClass:"number-date"},[e._v(e._s(e.kalendar_options.formatDayTitle(r)[1]))]),n("span",{staticClass:"letters-date"},[e._v(e._s(e.kalendar_options.formatDayTitle(r)[0]))])])])})),0),n("ul",{staticClass:"all-day"},[n("span",[e._v("All Day")]),e._l(e.days||[],(function(t,a){return n("li",{key:a,class:{"all-today":e._isToday(t.value),"is-all-day":!1},style:"height:"+(e.kalendar_options.cell_height+5)+"px"})}))],2)]),e._e(),e.hours?n("div",{staticClass:"blocks"},[n("div",{staticClass:"calendar-blocks"},[n("ul",{staticClass:"hours"},e._l(e.hours||[],(function(t,a){return t.visible?n("li",{key:a,staticClass:"hour-row-identifier",style:"height:"+e.hourHeight+"px"},[n("span",[e._v(e._s(e.kalendar_options.formatLeftHours(t.value)))])]):e._e()})),0),n("div",{directives:[{name:"show",rawName:"v-show",value:"material_design"!==e.kalendar_options.style,expression:"kalendar_options.style !== 'material_design'"}],staticClass:"hour-indicator-line",style:"top:"+e.passedtime.distance+"px"},[n("span",{staticClass:"time-value"},[e._v(e._s(e.passedtime.value))]),n("span",{staticClass:"line"})]),e._l(e.days,(function(t,a){return n("kalendar-days",{key:t.value.slice(0,10),ref:t.value.slice(0,10),refInFor:!0,staticClass:"building-blocks",class:"day-"+(a+1),attrs:{day:t,"passed-time":e.passedtime.distance}})}))],2)]):e._e()])},r=[],i=(n("99af"),n("4160"),n("d81d"),n("fb6a"),n("accc"),n("0d03"),n("d3b7"),n("ac1f"),n("3ca3"),n("4d90"),n("1276"),n("159b"),n("ddb0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{ref:e.day.value+"-reference",staticClass:"kalendar-day",class:{"is-weekend":e.isWeekend,"is-today":e.isToday,creating:e.creator.creating||"popup-initiated"===e.creator.status},staticStyle:{position:"relative"}},e._l(e.day_cells,(function(t,a){return n("div",{key:"cell-"+a,staticClass:"is-an-hour",staticStyle:{height:"60px","border-right":"solid 1px var(--table-cell-border-color)","border-bottom":"solid 1px var(--table-cell-border-color)"}},[e.showRemindCard(t)?n("d-card",{staticClass:"calender-card",attrs:{shadow:"never","body-style":{padding:"5px"}}},[n("div",{staticClass:"calender-card-title"},e._l(e.getRemindTitle(t.time),(function(t,a){return n("span",{key:a},[e._v(e._s(t))])})),0),n("div",{staticClass:"calender-card-time"},[e._v(e._s(e._f("getLoginTime")(t.time)))])]):e._e()],1)})),0)}),s=[],l=(n("a4d3"),n("4de4"),n("7db0"),n("c740"),n("0481"),n("45fc"),n("a434"),n("4069"),n("e439"),n("dbb4"),n("b64b"),n("e25e"),n("2fa7")),o=n("102f"),d=n("34a4");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(n,!0).forEach((function(t){Object(l["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=window.kalendarHelpers.cloneObject,f=o["a"].isToday,h=o["a"].isWeekend,p={filters:{getLoginTime:function(e){var t=new Date,n=(t.getDate()<10?t.getDate():t.getDate(),new Date(parseInt(1e3*e))),a=n.getFullYear(),r=n.getMonth()+1,i=n.getDate()<10?"0"+n.getDate():""+n.getDate(),s=n.getHours(),l=n.getMinutes()<10?"0"+n.getMinutes():""+n.getMinutes(),o=a+"-"+r+"-"+i,d=s+":"+l;return o+" "+d}},props:["day","passedTime"],components:{kalendarCell:function(){return n.e("chunk-573dc9ba").then(n.bind(null,"ac6c"))}},provide:function(){return{kalendarAddEvent:this.addEvent,kalendarClearPopups:this.clearCreatingLeftovers}},data:function(){return{creator:{creating:!1,starting_cell:null,original_starting_cell:null,current_cell:null,ending_cell:null,status:null},temporary_event:null,day_cells:[],day_events:null,remindValue:[]}},inject:["kalendar_options"],created:function(){this.renderDay(),this.remindValue=this.$store.state.remindList},mounted:function(){this.kalendar_options.scrollToNow&&this.isToday&&this.scrollView()},computed:{isWeekend:function(){return h(this.day.value)},isToday:function(){return f(this.day.value)}},methods:{getRemindTitle:function(e){var t,n=this;return this.remindValue.forEach((function(a){e==a.reminderSendTime&&(t=3==a.msg.msgType?"[".concat(n.$t("remind.voiceMessage"),"]"):9==a.msg.msgType?a.msg.url:6==a.msg.msgType?a.msg.fileName:89==a.msg.msgType?"[".concat(n.$t("remind.microVideoMessage"),"]"):a.msg.body)})),t},showRemindCard:function(e){var t;return this.$store.state.remindList.forEach((function(n){e.time!=n.reminderSendTime||(t=!0)})),t},renderDay:function(){var e=this;d["a"].send("getDayCells",{day:this.day.value,hourOptions:{start_hour:this.kalendar_options.day_starts_at,end_hour:this.kalendar_options.day_ends_at}}).then((function(t){return e.day_cells=t,e.getDayEvents(e.$kalendar.getEvents())}))},addEvent:function(e){var t=this,n=this.checkEventValidity(e);if(null!==n)return Promise.reject(n);var a=e.from,r=e.to;return a=kalendarHelpers.getLocaleTime(a),r=kalendarHelpers.getLocaleTime(r),d["a"].send("constructNewEvent",{event:u({},e,{from:a,to:r})}).then((function(n){var a=n.key;t.day_events.hasOwnProperty(a)?t.day_events[a].push(n):t.$set(t.day_events,a,[n]);var r=t.$kalendar.getEvents();console.log("Adding event to kalendar",e),r.push(u({},e,{id:n.id})),t.$kalendar.updateEvents(r)}))},removeEvent:function(e){var t=this.$kalendar.getEvents(),n=t.findIndex((function(t){return t.id===e.id}));if(!(n<0)){t.splice(n,1);var a=this.day_events[e.key].findIndex((function(t){return t.id===e.id}));return this.day_events[e.key].splice(a,1),this.$kalendar.updateEvents(t),Promise.resolve()}},checkEventValidity:function(e){var t=e.from,n=e.to;return t&&n?null:"No dates were provided in the payload"},getDayEvents:function(e){var t=this,n=e.map((function(e){return v(e)}));return d["a"].send("constructDayEvents",{events:n,day:this.day.value}).then((function(e){t.day_events=e}))},clearCreatingLeftovers:function(){for(var e in this.day_events){var t=this.day_events[e].some((function(e){return"popup-initiated"===e.status||"creating"===e.status}));if(t){var n=this.day_events[e].filter((function(e){return"completed"===e.status}));this.$set(this.day_events,e,n),0===n.length&&delete this.day_events[e]}}this.resetEvents()},resetEvents:function(){(this.creator.creating||null!==this.creator.status)&&(this.creator={creating:!1,starting_cell:null,original_starting_cell:null,current_cell:null,ending_cell:null,status:null,temporary_id:null},this.temporary_event=null)},updateCreator:function(e){if(this.creator=u({},this.validateSelection(e),{status:"creating"}),!1===this.kalendar_options.overlap&&Object.keys(this.day_events).length>0){var t=this.overlapPolice(e);if(t)return this.creator=this.validateSelection(t),this.selectCell(),void this.initiatePopup()}this.selectCell()},validateSelection:function(e){var t=e.original_starting_cell,n=(e.starting_cell,e.current_cell);return"reverse"===e.direction&&t.index>n.index?u({},e,{starting_cell:n,ending_cell:t}):e},selectCell:function(){if(this.creator.creating){var e=this.creator,t=(e.creating,e.ending_cell),n=(e.current_cell,e.starting_cell),a=(e.original_starting_cell,t.index+1);t=this.day_cells[a];var r=new Date(t.value)-new Date(n.value),i=Math.floor(r%864e5/36e5),s=Math.round(r%864e5%36e5/6e4),l=new Date(n.value),o=new Date(t.value),d=s+60*i;this.temporary_event={start:{masked_value:l.toISOString(),value:l.toISOString(),rounded:!1,round_offset:null},end:{masked_value:o.toISOString(),value:o.toISOString(),rounded:!1,round_offset:null},distance:d,status:"creating"}}},initiatePopup:function(){if(!this.creating||"creating"===this.creator.status){this.creator=u({},this.creator,{status:"popup-initiated",creating:!1});var e=this.creator,t=e.ending_cell,n=(e.current_cell,e.starting_cell),a=(e.original_starting_cell,t.index+1);t=this.day_cells[a];var r=new Date(t.value)-new Date(n.value),i=Math.floor(r%864e5/36e5),s=Math.round(r%864e5%36e5/6e4),l=new Date(n.value),o=new Date(t.value),d={start:{masked_value:l.toISOString(),value:l.toISOString(),rounded:!1,round_offset:null},end:{masked_value:o.toISOString(),value:o.toISOString(),rounded:!1,round_offset:null},distance:s+60*i,status:"popup-initiated"},c=this.day_events[n.value];c||(c=[]),c.push(d),this.$set(this.day_events,n.value,c),this.temporary_event=null}},overlapPolice:function(e){var t=this;if(e.current_cell){var n=Object.keys(this.day_events).map((function(e){return t.day_events[e]})).flat().filter((function(t){var n=new Date(e.starting_cell.value),a=new Date(e.ending_cell.value),r=new Date(t.start.value),i=new Date(t.end.value);return a>r&&a<i||n<r&&a>r}));if(n&&0!==n.length){var a=e;if("reverse"===e.direction){var r=n[0].end,i=this.day_cells.find((function(e){return e.value===r.masked_value})),s=this.day_cells[i.index];a.starting_cell={value:s.value,index:s.index},a.current_cell={value:s.value,index:s.index}}else{var l=n[0].start,o=this.day_cells.find((function(e){return e.value===l.masked_value})),d=this.day_cells[o.index-1];a.ending_cell={value:d.value,index:d.index}}return a}}},scrollView:function(){var e=this.$refs.nowIndicator.offsetTop;console.log("Scrolling to :",e),setTimeout((function(){window.scroll({top:e,left:0,behavior:"smooth"})}),500)}}},_=p,y=(n("1aae"),n("2877")),g=Object(y["a"])(_,i,s,!1,null,null,null),m=g.exports,k=o["a"].isBefore,w=o["a"].isToday,b=o["a"].getHourlessDate,D=o["a"].addTimezoneInfo,S=(o["a"].getDatelessHour,o["a"].getLocaleTime),T=o["a"].formatAMPM,x={components:{KalendarDays:m},created:function(){var e=this;this.addHelperMethods(),setInterval((function(){return e.kalendar_options.now=new Date}),6e4),this.constructWeek()},inject:["kalendar_options","kalendar_events"],data:function(){return{hours:null,days:[]}},computed:{colsSpace:function(){return"flat_design"===this.kalendar_options.style?"5px":"0px"},hourHeight:function(){return 60},passedtime:function(){var e=this.kalendar_options,t=e.day_starts_at,n=e.day_ends_at,a=e.now,r=S(a),i="".concat(r.split("T")[0],"T").concat((t+"").padStart(2,0),":00:00.000Z"),s="".concat(r.split("T")[0],"T").concat((n+"").padStart(2,0),":00:00.000Z");if(console.log({day_starts:i,day_ends:s,time:r}),new Date(s)-new Date(r)<0)return null;if(new Date(r)-new Date(i)<0)return null;var l=r.split("T")[1].slice(0,5);if(this.kalendar_options.military_time){var o=T(l.split(":")[0]);o.slice(-2);console.log({ampm:o})}var d=(new Date(r)-new Date(i))/1e3/60;return{distance:d,time:r}}},methods:{_isToday:function(e){return w(e)},updateAppointments:function(e){var t=e.id,n=e.data;this.$emit("update",{id:t,data:n})},deleteAppointment:function(e){this.$emit("delete",{id:e})},clearAppointments:function(){this.$emit("clear")},isBefore:function(e){var t=new Date(this.kalendar_options.now),n=S(t.toISOString());return k(e,b(n))},constructWeek:function(){var e=this,t=this.kalendar_options.current_day.slice(0,10),n=this.kalendar_options,a=n.hide_dates,r=n.hide_days,i=n.view_type;return Promise.all([d["a"].send("getDays",{day:t,options:{hide_dates:a,hide_days:r,view_type:i}}).then((function(t){e.days=t})),d["a"].send("getHours",{hourOptions:{start_hour:this.kalendar_options.day_starts_at,end_hour:this.kalendar_options.day_ends_at}}).then((function(t){e.hours=t}))])},addHelperMethods:function(){var e=this;console.log("this.$kalendar",this.$kalendar),this.$kalendar.buildWeek=function(){e.constructWeek()},this.$kalendar.addNewEvent=function(t){if(!t)return Promise.reject("No payload");var n=t.from,a=t.to;"000Z"===n.slice(-4)&&(t.from=D(n)),"000Z"===a.slice(-4)&&(t.to=D(a));var r=t.from.slice(0,10),i=e.$refs[r];if(i&&i[0])i[0].addEvent(t);else{var s=e.$kalendar.getEvents();s.push(t),e.$kalendar.updateEvents(s)}},this.$kalendar.removeEvent=function(t){var n=t.day,a=t.key,r=t.id;if(n.length>10&&(n=n.slice(0,10)),console.log("Options:",t),!n)return Promise.reject("Day wasn't provided");if(!r)return Promise.reject("No ID was provided");if(!a)return Promise.reject("No key was provided in the object");var i=n;e.$refs[i][0].removeEvent({id:r,key:a})},this.$kalendar.closePopups=function(){var t=e.days.map((function(e){return e.value.slice(0,10)}));t.forEach((function(t){e.$refs[t][0].clearCreatingLeftovers()}))}}}},O=x,C=(n("4290"),Object(y["a"])(O,a,r,!1,null,null,null));t["default"]=C.exports}}]);
//# sourceMappingURL=chunk-652a3cfe.js.map