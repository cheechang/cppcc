{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.array.flat.js","webpack:///./src/components/kalendar/kalendar-day.vue?cf36","webpack:///./node_modules/core-js/modules/es.string.iterator.js","webpack:///./node_modules/core-js/modules/es.array.unscopables.flat.js","webpack:///./src/components/kalendar/kalendar-weekview.vue?4465","webpack:///./node_modules/core-js/internals/flatten-into-array.js","webpack:///./node_modules/core-js/modules/es.array.find-index.js","webpack:///./node_modules/core-js/modules/web.dom-collections.iterator.js","webpack:///./src/components/kalendar/kalendar-weekview.vue?5ba8","webpack:///./src/components/kalendar/kalendar-day.vue?07b1","webpack:///src/components/kalendar/kalendar-day.vue","webpack:///./src/components/kalendar/kalendar-day.vue?33cd","webpack:///./src/components/kalendar/kalendar-day.vue","webpack:///src/components/kalendar/kalendar-weekview.vue","webpack:///./src/components/kalendar/kalendar-weekview.vue?0352","webpack:///./src/components/kalendar/kalendar-weekview.vue"],"names":["$","flattenIntoArray","toObject","toLength","toInteger","arraySpeciesCreate","target","proto","flat","depthArg","arguments","length","undefined","O","this","sourceLen","A","charAt","InternalStateModule","defineIterator","STRING_ITERATOR","setInternalState","set","getInternalState","getterFor","String","iterated","type","string","index","point","state","value","done","addToUnscopables","isArray","bind","original","source","start","depth","mapper","thisArg","element","targetIndex","sourceIndex","mapFn","TypeError","module","exports","$findIndex","findIndex","FIND_INDEX","SKIPS_HOLES","Array","forced","callbackfn","global","DOMIterables","ArrayIteratorMethods","createNonEnumerableProperty","wellKnownSymbol","ITERATOR","TO_STRING_TAG","ArrayValues","values","COLLECTION_NAME","Collection","CollectionPrototype","prototype","error","METHOD_NAME","render","_vm","_h","$createElement","_c","_self","staticClass","style","colsSpace","_l","days","ref","key","class","_isToday","isBefore","_v","_s","kalendar_options","formatDayTitle","date","cell_height","_e","hours","hour","hourHeight","formatLeftHours","directives","name","rawName","expression","passedtime","day","slice","refInFor","attrs","distance","staticRenderFns","isWeekend","isToday","creator","creating","status","staticStyle","cell","showRemindCard","padding","getRemindTitle","time","item","_f","filters","getLoginTime","yearMonthDay","timeMinutes","props","components","kalendarCell","provide","kalendarAddEvent","addEvent","kalendarClearPopups","clearCreatingLeftovers","inject","created","renderDay","remindValue","$store","remindList","mounted","scrollToNow","scrollView","computed","methods","forEach","reminderSendTime","msg","showTime","hourOptions","start_hour","day_starts_at","end_hour","day_ends_at","validation_message","Promise","reject","from","kalendarHelpers","getLocaleTime","to","event","console","log","payload","events","push","id","constructed_event","removeEvent","eventIndex","splice","day_events","$kalendar","updateEvents","resolve","checkEventValidity","getDayEvents","clonedEvents","hasPending","$set","completed","resetEvents","starting_cell","original_starting_cell","current_cell","ending_cell","temporary_id","temporary_event","updateCreator","overlap","Object","keys","fixedOverlap","validateSelection","selectCell","initiatePopup","direction","day_cells","real_ending_cell_index","masked_value","startDate","toISOString","rounded","round_offset","end","endDate","diffMins","updated_events","finalEvent","overlapPolice","overlapped","newPayload","topoffset","setTimeout","window","scroll","component","KalendarDays","addHelperMethods","setInterval","constructWeek","data","Date","day_ends","day_starts","military_time","updateAppointments","$emit","deleteAppointment","clearAppointments","all","buildWeek","addNewEvent","addTimezoneInfo","refObject","options","closePopups","refs"],"mappings":"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","file":"static/js/chunk-652a3cfe.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar flattenIntoArray = require('../internals/flatten-into-array');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar toInteger = require('../internals/to-integer');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\n// `Array.prototype.flat` method\n// https://github.com/tc39/proposal-flatMap\n$({ target: 'Array', proto: true }, {\n  flat: function flat(/* depthArg = 1 */) {\n    var depthArg = arguments.length ? arguments[0] : undefined;\n    var O = toObject(this);\n    var sourceLen = toLength(O.length);\n    var A = arraySpeciesCreate(O, 0);\n    A.length = flattenIntoArray(A, O, O, sourceLen, 0, depthArg === undefined ? 1 : toInteger(depthArg));\n    return A;\n  }\n});\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./kalendar-day.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./kalendar-day.vue?vue&type=style&index=0&lang=scss&\"","'use strict';\nvar charAt = require('../internals/string-multibyte').charAt;\nvar InternalStateModule = require('../internals/internal-state');\nvar defineIterator = require('../internals/define-iterator');\n\nvar STRING_ITERATOR = 'String Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(STRING_ITERATOR);\n\n// `String.prototype[@@iterator]` method\n// https://tc39.github.io/ecma262/#sec-string.prototype-@@iterator\ndefineIterator(String, 'String', function (iterated) {\n  setInternalState(this, {\n    type: STRING_ITERATOR,\n    string: String(iterated),\n    index: 0\n  });\n// `%StringIteratorPrototype%.next` method\n// https://tc39.github.io/ecma262/#sec-%stringiteratorprototype%.next\n}, function next() {\n  var state = getInternalState(this);\n  var string = state.string;\n  var index = state.index;\n  var point;\n  if (index >= string.length) return { value: undefined, done: true };\n  point = charAt(string, index);\n  state.index += point.length;\n  return { value: point, done: false };\n});\n","// this method was added to unscopables after implementation\n// in popular engines, so it's moved to a separate module\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\naddToUnscopables('flat');\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./kalendar-weekview.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./kalendar-weekview.vue?vue&type=style&index=0&lang=scss&\"","'use strict';\nvar isArray = require('../internals/is-array');\nvar toLength = require('../internals/to-length');\nvar bind = require('../internals/bind-context');\n\n// `FlattenIntoArray` abstract operation\n// https://tc39.github.io/proposal-flatMap/#sec-FlattenIntoArray\nvar flattenIntoArray = function (target, original, source, sourceLen, start, depth, mapper, thisArg) {\n  var targetIndex = start;\n  var sourceIndex = 0;\n  var mapFn = mapper ? bind(mapper, thisArg, 3) : false;\n  var element;\n\n  while (sourceIndex < sourceLen) {\n    if (sourceIndex in source) {\n      element = mapFn ? mapFn(source[sourceIndex], sourceIndex, original) : source[sourceIndex];\n\n      if (depth > 0 && isArray(element)) {\n        targetIndex = flattenIntoArray(target, original, element, toLength(element.length), targetIndex, depth - 1) - 1;\n      } else {\n        if (targetIndex >= 0x1FFFFFFFFFFFFF) throw TypeError('Exceed the acceptable array length');\n        target[targetIndex] = element;\n      }\n\n      targetIndex++;\n    }\n    sourceIndex++;\n  }\n  return targetIndex;\n};\n\nmodule.exports = flattenIntoArray;\n","'use strict';\nvar $ = require('../internals/export');\nvar $findIndex = require('../internals/array-iteration').findIndex;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND_INDEX = 'findIndex';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\nif (FIND_INDEX in []) Array(1)[FIND_INDEX](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.findIndex` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.findindex\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $findIndex(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND_INDEX);\n","var global = require('../internals/global');\nvar DOMIterables = require('../internals/dom-iterables');\nvar ArrayIteratorMethods = require('../modules/es.array.iterator');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar ArrayValues = ArrayIteratorMethods.values;\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  var Collection = global[COLLECTION_NAME];\n  var CollectionPrototype = Collection && Collection.prototype;\n  if (CollectionPrototype) {\n    // some Chrome versions have non-configurable methods on DOMTokenList\n    if (CollectionPrototype[ITERATOR] !== ArrayValues) try {\n      createNonEnumerableProperty(CollectionPrototype, ITERATOR, ArrayValues);\n    } catch (error) {\n      CollectionPrototype[ITERATOR] = ArrayValues;\n    }\n    if (!CollectionPrototype[TO_STRING_TAG]) {\n      createNonEnumerableProperty(CollectionPrototype, TO_STRING_TAG, COLLECTION_NAME);\n    }\n    if (DOMIterables[COLLECTION_NAME]) for (var METHOD_NAME in ArrayIteratorMethods) {\n      // some Chrome versions have non-configurable methods on DOMTokenList\n      if (CollectionPrototype[METHOD_NAME] !== ArrayIteratorMethods[METHOD_NAME]) try {\n        createNonEnumerableProperty(CollectionPrototype, METHOD_NAME, ArrayIteratorMethods[METHOD_NAME]);\n      } catch (error) {\n        CollectionPrototype[METHOD_NAME] = ArrayIteratorMethods[METHOD_NAME];\n      }\n    }\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"calendar-wrap\",style:((\"--space-between-cols: \" + _vm.colsSpace))},[_c('div',{staticClass:\"sticky-top\"},[_c('ul',{staticClass:\"days\"},_vm._l(((_vm.days || [])),function(ref,index){\nvar value = ref.value;\nreturn _c('li',{key:index,staticClass:\"day-indicator\",class:{'today': _vm._isToday(value), 'is-before': _vm.isBefore(value)}},[_c('div',[_c('span',{staticClass:\"number-date\"},[_vm._v(_vm._s(_vm.kalendar_options.formatDayTitle(value)[1]))]),_c('span',{staticClass:\"letters-date\"},[_vm._v(_vm._s(_vm.kalendar_options.formatDayTitle(value)[0]))])])])}),0),_c('ul',{staticClass:\"all-day\"},[_c('span',[_vm._v(\"All Day\")]),_vm._l(((_vm.days || [])),function(date,index){return _c('li',{key:index,class:{'all-today': _vm._isToday(date.value), 'is-all-day': false},style:((\"height:\" + (_vm.kalendar_options.cell_height + 5) + \"px\"))})})],2)]),(false)?_c('div',{staticClass:\"dummy-row\"},[_c('ul',{staticClass:\"dummy-days\"},_vm._l(((_vm.days || [])),function(day,index){return _c('li',{key:index,style:((\"height:\" + (_vm.kalendar_options.cell_height) + \"px\"))})}),0)]):_vm._e(),(_vm.hours)?_c('div',{staticClass:\"blocks\"},[_c('div',{staticClass:\"calendar-blocks\"},[_c('ul',{staticClass:\"hours\"},_vm._l(((_vm.hours || [])),function(hour,index){return (hour.visible)?_c('li',{key:index,staticClass:\"hour-row-identifier\",style:((\"height:\" + _vm.hourHeight + \"px\"))},[_c('span',[_vm._v(_vm._s(_vm.kalendar_options.formatLeftHours(hour.value)))])]):_vm._e()}),0),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.kalendar_options.style !== 'material_design'),expression:\"kalendar_options.style !== 'material_design'\"}],staticClass:\"hour-indicator-line\",style:((\"top:\" + (_vm.passedtime.distance) + \"px\"))},[_c('span',{staticClass:\"time-value\"},[_vm._v(_vm._s(_vm.passedtime.value))]),_c('span',{staticClass:\"line\"})]),_vm._l((_vm.days),function(day,index){return _c('kalendar-days',{key:day.value.slice(0,10),ref:day.value.slice(0,10),refInFor:true,staticClass:\"building-blocks\",class:(\"day-\" + (index+1)),attrs:{\"day\":day,\"passed-time\":_vm.passedtime.distance}})})],2)]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',{ref:_vm.day.value + '-reference',staticClass:\"kalendar-day\",class:{\n    'is-weekend': _vm.isWeekend, \n    'is-today': _vm.isToday,\n    'creating': _vm.creator.creating || _vm.creator.status === 'popup-initiated'\n  },staticStyle:{\"position\":\"relative\"}},_vm._l((_vm.day_cells),function(cell,index){return _c('div',{key:(\"cell-\" + index),staticClass:\"is-an-hour\",staticStyle:{\"height\":\"60px\",\"border-right\":\"solid 1px var(--table-cell-border-color)\",\"border-bottom\":\"solid 1px var(--table-cell-border-color)\"}},[(_vm.showRemindCard(cell))?_c('d-card',{staticClass:\"calender-card\",attrs:{\"shadow\":\"never\",\"body-style\":{ padding: '5px' }}},[_c('div',{staticClass:\"calender-card-title\"},_vm._l((_vm.getRemindTitle(cell.time)),function(item,index){return _c('span',{key:index},[_vm._v(_vm._s(item))])}),0),_c('div',{staticClass:\"calender-card-time\"},[_vm._v(_vm._s(_vm._f(\"getLoginTime\")(cell.time)))])]):_vm._e()],1)}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <ul style=\"position: relative;\"\n      :class=\"{\n      'is-weekend': isWeekend, \n      'is-today': isToday,\n      'creating': creator.creating || creator.status === 'popup-initiated'\n    }\"\n      class=\"kalendar-day\"\n      :ref=\"day.value + '-reference'\">\n    <div style=\"height:60px;border-right: solid 1px var(--table-cell-border-color);border-bottom: solid 1px var(--table-cell-border-color);\"\n     v-for=\"(cell , index) in day_cells\" :key=\"`cell-${index}`\" class=\"is-an-hour\">\n      <d-card class=\"calender-card\" shadow=\"never\" :body-style=\"{ padding: '5px' }\" v-if=\"showRemindCard(cell)\">\n        <div class=\"calender-card-title\">\n          <span v-for=\"(item, index) in getRemindTitle(cell.time)\" :key=\"index\">{{ item }}</span>\n        </div>\n        <div class=\"calender-card-time\">{{cell.time | getLoginTime}}</div>\n      </d-card>\n    </div>\n                   \n  </ul>\n</template>\n<script>\nconst { cloneObject } = window.kalendarHelpers;\nimport Utils from './utils';\nconst { isToday, isWeekend } = Utils;\n\nimport myWorker from '@/components/kalendar/workers';\n\nexport default {\n  filters: {\n    getLoginTime(value) {\n      //获取当前时间,\n      let nowTime = new Date();\n      let nowDay =\n        nowTime.getDate() < 10\n          ? \"0\" + nowTime.getDate()\n          : \"\" + nowTime.getDate();\n      let d = new Date(parseInt(value*1000));\n      let year = d.getFullYear();\n      let month = d.getMonth() + 1;\n      let day = d.getDate() < 10 ? \"0\" + d.getDate() : \"\" + d.getDate();\n      let hour = d.getHours();\n      let minutes =\n        d.getMinutes() < 10 ? \"0\" + d.getMinutes() : \"\" + d.getMinutes();\n      let yearMonthDay = year + \"-\" + month + \"-\" + day;\n      let timeMinutes = hour + \":\" + minutes;\n      return yearMonthDay + \" \" + timeMinutes;\n    }\n  },\n  props: ['day', 'passedTime'],\n  components: {\n    kalendarCell: () =>\n      import('./kalendar-cell.vue'),\n  },\n  provide() {\n    return {\n      kalendarAddEvent: this.addEvent,\n      kalendarClearPopups: this.clearCreatingLeftovers\n    };\n  },\n   data: () => ({\n    creator: {\n      creating: false,\n      starting_cell: null,\n      original_starting_cell: null,\n      current_cell: null,\n      ending_cell: null,\n      status: null,\n    },\n    temporary_event: null,\n    day_cells: [],\n    day_events: null,\n    remindValue:[]\n  }),\n  inject: ['kalendar_options'],\n  created() {\n    this.renderDay();\n    this.remindValue = this.$store.state.remindList\n  },\n  mounted() {\n    if (this.kalendar_options.scrollToNow && this.isToday) this.scrollView();\n  },\n  computed: {\n    isWeekend() {\n      return isWeekend(this.day.value);\n    },\n    isToday() {\n      return isToday(this.day.value);\n    }\n  },\n \n  methods: {\n  // getRemindTitle(time) {\n    //   let msg = [];\n    //   console.log('time',time)\n    //   console.log(\"bbb=>>>>\", this.remindValue);\n    //   this.remindValue.forEach(element => {\n    //   console.log('>>>>>>>>>',element.reminderSendTime)\n    //     if (time == element.reminderSendTime) {\n    //       console.log('ok')\n    //       if(element.msg.msgType == 3){\n    //         console.log('msgType==3')\n    //         msg.push('[这是一条语音消息]');\n    //       }else if(element.msg.msgType == 9) {//网页链接\n    //         console.log('msgType==9')\n    //         msg.push(element.msg.url);\n    //       }else if(element.msg.msgType == 6){//文件\n    //         console.log('msgType==6')\n    //         msg.push(element.msg.fileName);\n    //       }else if(element.msg.msgType == 89){//视屏\n    //         console.log('msgType==89')\n    //         msg.push('[这是一个微视频]');\n    //       }else{\n    //         console.log('body')\n    //         msg.push(element.msg.body);\n    //       }\n    //     }\n    //   })\n    //   return msg;\n  // },\n    getRemindTitle(time) {\n       let msg ;\n      this.remindValue.forEach(element => {\n        if (time == element.reminderSendTime) {\n          if(element.msg.msgType == 3){\n\n            msg = (`[${this.$t('remind.voiceMessage')}]`);\n          }else if(element.msg.msgType == 9) {//网页链接\n\n            msg = (element.msg.url);\n          }else if(element.msg.msgType == 6){//文件\n\n            msg = (element.msg.fileName);\n          }else if(element.msg.msgType == 89){//视屏\n\n            msg = (`[${this.$t('remind.microVideoMessage')}]`);\n          }else{\n\n            msg = (element.msg.body);\n          }\n        }\n      })\n      return msg;\n    },\n    showRemindCard(cell) {\n      let showTime;\n      this.$store.state.remindList.forEach(element => {\n        if(cell.time == element.reminderSendTime) {\n          showTime = true;\n          return;\n        }\n      })\n      return showTime;\n    },\n    renderDay() {\n      myWorker.send('getDayCells', {\n        day: this.day.value,\n        hourOptions: {\n          start_hour: this.kalendar_options.day_starts_at,\n          end_hour: this.kalendar_options.day_ends_at\n        }\n      }).then(reply => {\n        this.day_cells = reply;\n        return this.getDayEvents(this.$kalendar.getEvents());\n      });\n    },\n\n    addEvent(payload) {\n      // validation\n      let validation_message = this.checkEventValidity(payload);\n      if (validation_message !== null) {\n        return Promise.reject(validation_message);\n      }\n\n      // use web worker to generate event\n      // and then render it in the day_events objects\n      let { from, to } = payload;\n      from = kalendarHelpers.getLocaleTime(from);\n      to = kalendarHelpers.getLocaleTime(to);\n      return myWorker.send('constructNewEvent', {\n        event: {\n          ...payload,\n          from,\n          to\n        }\n      }).then(constructed_event => {\n        let { key } = constructed_event;\n        if (this.day_events.hasOwnProperty(key)) {\n          this.day_events[key].push(constructed_event);\n        } else {\n          // must use $set since key wasnt present in the object\n          // vue will fail to render it\n          this.$set(this.day_events, key, [constructed_event]);\n        }\n        let events = this.$kalendar.getEvents();\n        console.log('Adding event to kalendar', payload);\n        events.push({\n          ...payload,\n          id: constructed_event.id\n        });\n        this.$kalendar.updateEvents(events);\n      });\n    },\n    removeEvent(payload) {\n      let events = this.$kalendar.getEvents();\n      let eventIndex = events.findIndex(event => event.id === payload.id);\n      if (eventIndex < 0) return;\n      events.splice(eventIndex, 1);\n      let index = this.day_events[payload.key]\n        .findIndex(event => event.id === payload.id);\n      this.day_events[payload.key].splice(index, 1);\n      this.$kalendar.updateEvents(events);\n      return Promise.resolve();\n    },\n    checkEventValidity(payload) {\n      let { from, to } = payload;\n      if (!from || !to) return 'No dates were provided in the payload';\n      /*if (isoFrom !== from) {\n        return 'From date is not ISO format';\n      }\n      if (isoTo !== to) {\n        return 'To date is not ISO format';\n      }*/\n      return null;\n    },\n    getDayEvents(events) {\n      let clonedEvents = events.map(event => cloneObject(event));\n      return myWorker.send('constructDayEvents', {\n        events: clonedEvents,\n        day: this.day.value,\n      }).then(constructed_events => {\n        this.day_events = constructed_events;\n      })\n    },\n    clearCreatingLeftovers() {\n      for (let key in this.day_events) {\n        let hasPending = this.day_events[key].some(event => {\n          return event.status === 'popup-initiated' || event.status === 'creating';\n        });\n        if (hasPending) {\n          let completed = this.day_events[key]\n            .filter(event => event.status === 'completed');\n          this.$set(this.day_events, key, completed);\n          if (completed.length === 0) {\n            delete this.day_events[key];\n          }\n        }\n      }\n      this.resetEvents();\n    },\n    resetEvents() {\n      if (!this.creator.creating && this.creator.status === null) return;\n      this.creator = {\n        creating: false,\n        starting_cell: null,\n        original_starting_cell: null,\n        current_cell: null,\n        ending_cell: null,\n        status: null,\n        temporary_id: null\n      };\n      this.temporary_event = null;\n    },\n\n    // this method is what we use\n    // to start the flow of selecting a new cell\n    // while the creator is enabled\n    updateCreator(payload) {\n      this.creator = {\n        ...this.validateSelection(payload),\n        status: 'creating'\n      };\n      if (this.kalendar_options.overlap === false && Object.keys(this.day_events).length > 0) {\n        let fixedOverlap = this.overlapPolice(payload);\n        if (fixedOverlap) {\n          this.creator = this.validateSelection(fixedOverlap);\n          this.selectCell();\n          this.initiatePopup();\n          return;\n        }\n      }\n      this.selectCell();\n    },\n\n    // when the direction is reversed,\n    // the ending cell is actually the originally selected cell\n    validateSelection(event) {\n      let { original_starting_cell, starting_cell, current_cell } = event;\n      if (event.direction === 'reverse' &&\n        original_starting_cell.index > current_cell.index) {\n        return {\n          ...event,\n          starting_cell: current_cell,\n          ending_cell: original_starting_cell\n        }\n      }\n      return event;\n    },\n    selectCell() {\n      if (!this.creator.creating) return;\n      let {\n        creating,\n        ending_cell,\n        current_cell,\n        starting_cell,\n        original_starting_cell\n      } = this.creator;\n\n      let real_ending_cell_index = ending_cell.index + 1;\n      ending_cell = this.day_cells[real_ending_cell_index];\n\n      const diffInMs = new Date(ending_cell.value) - new Date(starting_cell.value);\n      const diffInHrs = Math.floor((diffInMs % 86400000) / 3600000);\n      const diffMins = Math.round(((diffInMs % 86400000) % 3600000) / 60000);\n      let startDate = new Date(starting_cell.value);\n      let endDate = new Date(ending_cell.value);\n\n      let distance = diffMins + (diffInHrs * 60);\n\n      this.temporary_event = {\n        start: {\n          masked_value: startDate.toISOString(),\n          value: startDate.toISOString(),\n          rounded: false,\n          round_offset: null\n        },\n        end: {\n          masked_value: endDate.toISOString(),\n          value: endDate.toISOString(),\n          rounded: false,\n          round_offset: null\n        },\n        distance: distance,\n        status: 'creating'\n      };\n    },\n    initiatePopup() {\n      if (this.creating && this.creator.status !== 'creating') return;\n      this.creator = {\n        ...this.creator,\n        status: 'popup-initiated',\n        creating: false\n      };\n      let { ending_cell, current_cell, starting_cell, original_starting_cell } = this.creator;\n      let real_ending_cell_index = ending_cell.index + 1;\n      ending_cell = this.day_cells[real_ending_cell_index];\n\n      const diffInMs = new Date(ending_cell.value) - new Date(starting_cell.value);\n      const diffInHrs = Math.floor((diffInMs % 86400000) / 3600000);\n      const diffMins = Math.round(((diffInMs % 86400000) % 3600000) / 60000);\n      let startDate = new Date(starting_cell.value);\n      let endDate = new Date(ending_cell.value);\n\n      let finalEvent = {\n        start: {\n          masked_value: startDate.toISOString(),\n          value: startDate.toISOString(),\n          rounded: false,\n          round_offset: null\n        },\n        end: {\n          masked_value: endDate.toISOString(),\n          value: endDate.toISOString(),\n          rounded: false,\n          round_offset: null\n        },\n        distance: diffMins + (diffInHrs * 60),\n        status: 'popup-initiated'\n      };\n\n      let updated_events = this.day_events[starting_cell.value];\n      if (!updated_events) updated_events = [];\n      updated_events.push(finalEvent);\n\n      this.$set(this.day_events, starting_cell.value, updated_events);\n      this.temporary_event = null;\n    },\n    overlapPolice(payload) {\n      if (!payload.current_cell) return;\n      let overlapped = Object.keys(this.day_events)\n        .map(evKey => {\n          return this.day_events[evKey]\n        })\n        .flat()\n        .filter(event => {\n          let cellStart = new Date(payload.starting_cell.value);\n          let cellEnd = new Date(payload.ending_cell.value);\n          let eventStarts = new Date(event.start.value);\n          let eventEnds = new Date(event.end.value);\n          return (cellEnd > eventStarts && cellEnd < eventEnds) ||\n            (cellStart < eventStarts && cellEnd > eventStarts);\n        });\n      if (!overlapped || overlapped.length === 0) {\n        return;\n      }\n      let newPayload = payload;\n      if (payload.direction === 'reverse') {\n        let needed_cell = overlapped[0].end;\n        let event_cell = this.day_cells.find(c => c.value === needed_cell.masked_value);\n        let cell = this.day_cells[event_cell.index];\n        newPayload.starting_cell = {\n          value: cell.value,\n          index: cell.index\n        };\n        newPayload.current_cell = {\n          value: cell.value,\n          index: cell.index\n        };\n      } else {\n        let needed_cell = overlapped[0].start;\n        let event_cell = this.day_cells.find(c => c.value === needed_cell.masked_value);\n        let cell = this.day_cells[event_cell.index - 1];\n        newPayload.ending_cell = {\n          value: cell.value,\n          index: cell.index\n        };\n      }\n      return newPayload;\n    },\n    scrollView() {\n      let topoffset = this.$refs.nowIndicator.offsetTop;\n      console.log('Scrolling to :', topoffset);\n      setTimeout(() => {\n        window.scroll({ top: topoffset, left: 0, behavior: 'smooth' });\n      }, 500);\n    },\n  },\n}\n</script>\n<style lang=\"scss\">\nul.kalendar-day {\n  position: relative;\n  background-color: white;\n\n  &.is-weekend {\n    background-color: var(--weekend-color);\n  }\n\n  &.is-today {\n    background-color: var(--current-day-color);\n  }\n\n  .clear {\n    position: absolute;\n    z-index: 1;\n    top: -20px;\n    right: 0;\n    font-size: 10px;\n  }\n\n  &.creating {\n    z-index: 11;\n\n    .created-event {\n      pointer-events: none;\n    }\n  }\n  .calender-card {\n    position: relative;\n    height: 100%;\n    color: #99AEE0;\n    font-size: 14px;\n    background-color: #F1F6FF;\n    border-radius: 0px!important;\n    border: 0px !important;\n    .calender-card-content {\n      padding-left:10px; \n      overflow: hidden;\n      text-overflow:ellipsis;\n      width: 110px;\n      height: 70px;\n    }\n    .calender-card-title {\n      // width: 93px;\n      // height: 80px;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      display: -webkit-box;\n      -webkit-line-clamp: 4;\n      -webkit-box-orient: vertical;\n      // display: flex;\n      // flex-grow: 0;\n      // overflow: hidden;\n      // flex-wrap: wrap;\n      // span {\n      //   width: 90px;\n      //   flex-shrink: 1;\n      //   overflow: hidden;\n      //   text-overflow: ellipsis;\n      //   white-space: nowrap;\n      // }\n\n    }\n    .calender-card-time {\n      font-size: 12px;\n      position: absolute;\n      top: 42px;\n      color: #99AEE0;\n    }\n  }\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./kalendar-day.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./kalendar-day.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./kalendar-day.vue?vue&type=template&id=6fc88ea4&\"\nimport script from \"./kalendar-day.vue?vue&type=script&lang=js&\"\nexport * from \"./kalendar-day.vue?vue&type=script&lang=js&\"\nimport style0 from \"./kalendar-day.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"calendar-wrap\"\r\n       :style=\"`--space-between-cols: ${colsSpace}`\">\r\n    <div class=\"sticky-top\">\r\n      <ul class=\"days\">\r\n        <li class=\"day-indicator\"\r\n            :key=\"index\"\r\n            v-for=\"({value}, index) in (days || [])\"\r\n            :class=\"{'today': _isToday(value), 'is-before': isBefore(value)}\">\r\n          <div>\r\n            <span class=\"number-date\">{{kalendar_options.formatDayTitle(value)[1]}}</span>\r\n            <span class=\"letters-date\">{{kalendar_options.formatDayTitle(value)[0]}}</span>\r\n          </div>\r\n        </li>\r\n      </ul>\r\n      <ul class=\"all-day\">\r\n        <span>All Day</span>\r\n        <li :key=\"index\"\r\n            v-for=\"(date, index) in (days || [])\"\r\n            :class=\"{'all-today': _isToday(date.value), 'is-all-day': false}\"\r\n            :style=\"`height:${kalendar_options.cell_height + 5}px`\"></li>\r\n      </ul>\r\n    </div>\r\n    <div class=\"dummy-row\"\r\n         v-if=\"false\">\r\n      <ul class=\"dummy-days\">\r\n        <li :key=\"index\"\r\n            v-for=\"(day, index) in (days || [])\"\r\n            :style=\"`height:${kalendar_options.cell_height}px`\"></li>\r\n      </ul>\r\n    </div>\r\n    <div class=\"blocks\"\r\n         v-if=\"hours\">\r\n      <div class=\"calendar-blocks\">\r\n        <ul class=\"hours\">\r\n          <li class=\"hour-row-identifier\"\r\n              :key=\"index\"\r\n              v-for=\"(hour, index) in (hours || [])\"\r\n              v-if=\"hour.visible\"\r\n              :style=\"`height:${hourHeight}px`\">\r\n            <span>{{kalendar_options.formatLeftHours(hour.value)}}</span>\r\n          </li>\r\n        </ul>\r\n        <div v-show=\"kalendar_options.style !== 'material_design'\"\r\n             class=\"hour-indicator-line\"\r\n             :style=\"`top:${passedtime.distance}px`\">\r\n          <span class=\"time-value\">{{passedtime.value}}</span>\r\n          <span class=\"line\"></span>\r\n        </div>\r\n        <kalendar-days :day=\"day\"\r\n                       class=\"building-blocks\"\r\n                       :class=\"`day-${index+1}`\"\r\n                       :key=\"day.value.slice(0,10)\"\r\n                       v-for=\"(day, index) in days\"\r\n                       :passed-time=\"passedtime.distance\"\r\n                       :ref=\"day.value.slice(0,10)\"\r\n                       >\r\n        </kalendar-days>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport KalendarDays from './kalendar-day.vue';\r\nimport myWorker from '@/components/kalendar/workers';\r\nimport Utils from './utils';\r\nconst { isBefore, isToday, getHourlessDate, addTimezoneInfo, getDatelessHour, getLocaleTime, formatAMPM } = Utils;\r\n\r\nexport default {\r\n  components: {\r\n    KalendarDays,\r\n  },\r\n  created() {\r\n    this.addHelperMethods();\r\n    setInterval(() => this.kalendar_options.now = new Date, 1000 * 60);\r\n    this.constructWeek();\r\n  },\r\n  inject: ['kalendar_options', 'kalendar_events'],\r\n  data: () => ({\r\n    hours: null,\r\n    days: []\r\n  }),\r\n  computed: {\r\n    colsSpace() {\r\n      return this.kalendar_options.style === 'flat_design' ? '5px' : '0px';\r\n    },\r\n    hourHeight() {\r\n      return 60\r\n      // return 6 * this.kalendar_options.cell_height;\r\n      //this.kalendar_options.cell_height * (60 / this.kalendar_options.split_value); \r\n      // * this.kalendar_options.hour_parts;\r\n    },\r\n    passedtime() {\r\n      let { day_starts_at, day_ends_at, now } = this.kalendar_options;\r\n      let time = getLocaleTime(now);\r\n      let day_starts = `${time.split('T')[0]}T${(day_starts_at + '').padStart(2,0)}:00:00.000Z`;\r\n      let day_ends = `${time.split('T')[0]}T${(day_ends_at + '').padStart(2,0)}:00:00.000Z`;\r\n\r\n      console.log({ day_starts, day_ends, time });\r\n\r\n      if (new Date(day_ends) - new Date(time) < 0) {\r\n        return null;\r\n      }\r\n      if (new Date(time) - new Date(day_starts) < 0) {\r\n        return null;\r\n      }\r\n\r\n      let label = time.split('T')[1].slice(0, 5);\r\n      if (this.kalendar_options.military_time) {\r\n        let ampm = formatAMPM(label.split(':')[0]);\r\n        let ampmlabel = ampm.slice(-2);\r\n        console.log({ ampm });\r\n      }\r\n      let distance = ((new Date(time) - new Date(day_starts)) / 1000) / 60;\r\n      return { distance, time };\r\n    },\r\n  },\r\n  methods: {\r\n    _isToday(day) {\r\n      return isToday(day);\r\n    },\r\n    updateAppointments({ id, data }) {\r\n      this.$emit('update', { id, data });\r\n    },\r\n    deleteAppointment(id) {\r\n      this.$emit('delete', { id });\r\n    },\r\n    clearAppointments() {\r\n      this.$emit('clear');\r\n    },\r\n    isBefore(day) {\r\n      let now = new Date(this.kalendar_options.now);\r\n      let formattedNow = getLocaleTime(now.toISOString());\r\n      return isBefore(day, getHourlessDate(formattedNow));\r\n    },\r\n    constructWeek() {\r\n      const date = this.kalendar_options.current_day.slice(0, 10);\r\n      const { hide_dates, hide_days, view_type } = this.kalendar_options;\r\n      return Promise.all([\r\n        myWorker.send('getDays', {\r\n          day: date,\r\n          options: {\r\n            hide_dates,\r\n            hide_days,\r\n            view_type\r\n          }\r\n        }).then(reply => {\r\n          this.days = reply; //.slice(0,1);\r\n        }),\r\n\r\n        myWorker.send('getHours', {\r\n          hourOptions: {\r\n            start_hour: this.kalendar_options.day_starts_at,\r\n            end_hour: this.kalendar_options.day_ends_at\r\n          }\r\n        }).then(reply => {\r\n          // Handle the reply\r\n          this.hours = reply;\r\n        })\r\n      ]);\r\n    },\r\n    addHelperMethods() {\r\n      console.log('this.$kalendar',this.$kalendar)\r\n      this.$kalendar.buildWeek = () => {\r\n        this.constructWeek();\r\n      };\r\n      this.$kalendar.addNewEvent = (payload) => {\r\n        if (!payload) return Promise.reject('No payload');\r\n\r\n        let { from, to } = payload;\r\n        if (from.slice(-4) === '000Z') payload.from = addTimezoneInfo(from);\r\n        if (to.slice(-4) === '000Z') payload.to = addTimezoneInfo(to);\r\n        let targetRef = payload.from.slice(0, 10);\r\n        const refObject = this.$refs[targetRef];\r\n        if (refObject && refObject[0]) {\r\n          refObject[0].addEvent(payload);\r\n        } else {\r\n          // appointment is not in this view\r\n          let events = this.$kalendar.getEvents();\r\n          events.push(payload);\r\n          this.$kalendar.updateEvents(events);\r\n        }\r\n      };\r\n\r\n      this.$kalendar.removeEvent = (options) => {\r\n        let { day, key, id } = options;\r\n        if (day.length > 10) {\r\n          day = day.slice(0, 10);\r\n        }\r\n        console.log('Options:', options);\r\n        if (!day)\r\n          return Promise.reject('Day wasn\\'t provided');\r\n        if (!id)\r\n          return Promise.reject('No ID was provided');\r\n        if (!key)\r\n          return Promise.reject('No key was provided in the object');\r\n        let targetRef = day;\r\n        this.$refs[targetRef][0].removeEvent({ id, key });\r\n      };\r\n\r\n      this.$kalendar.closePopups = () => {\r\n        let refs = this.days.map(day => day.value.slice(0, 10));\r\n        refs.forEach(ref => {\r\n          this.$refs[ref][0].clearCreatingLeftovers();\r\n        });\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\">\r\n$blue: #5FB3F2;\r\n$lblue: #D6EEFC;\r\n$dblue: #3D79B4;\r\n$lightgrey: #c7c9d5; //$lightgrey: #F5F4F5;\r\n$grey: #c7c9d5; //#C1C4C8;\r\n$a-grey: #666;\r\n$border-color: transparent;\r\n$theme-color: #e5e5e5;\r\n\r\n.calendar-wrap {\r\n  display: flex;\r\n  flex-direction: column;\r\n\r\n  ul {\r\n    list-style: none;\r\n    padding: 0px;\r\n\r\n    >li {\r\n      display: flex;\r\n    }\r\n  }\r\n}\r\n\r\n.sticky-top {\r\n  position: sticky;\r\n  top: 0;\r\n  z-index: 20;\r\n  background-color: white;\r\n\r\n  .days {\r\n    margin: 0px;\r\n    display: flex;\r\n    margin-left: 55px;\r\n\r\n    li {\r\n      display: inline-flex;\r\n      align-items: flex-end;\r\n      padding-top: 10px;\r\n      flex: 1;\r\n      font-size: 1.1rem;\r\n      color: $a-grey;\r\n      font-weight: 300;\r\n      margin-right: var(--space-between-cols);\r\n      border-bottom: solid 1px #e5e5e5;\r\n      padding-bottom: 5px;\r\n      position: relative;\r\n      font-size: 18px;\r\n\r\n      span {\r\n        margin-right: 3px;\r\n      }\r\n\r\n      span:first-child {\r\n        font-size: 20px;\r\n        font-weight: 500;\r\n      }\r\n    }\r\n\r\n    .today {\r\n      border-bottom-color: var(--main-color);\r\n      color: var(--main-color) !important;\r\n    }\r\n\r\n    .today::after {\r\n      content: '';\r\n      position: absolute;\r\n      height: 2px;\r\n      bottom: 0;\r\n      left: 0;\r\n      width: 100%;\r\n      background-color: var(--main-color);\r\n    }\r\n  }\r\n\r\n  .all-day {\r\n    display: flex;\r\n    margin-bottom: 0px; //border-top: solid 1px #e5e5e5;\r\n    margin-top: 0px;\r\n    border-bottom: solid 2px #e5e5e5;\r\n\r\n    span {\r\n      display: flex;\r\n      align-items: center;\r\n      padding: 0px 5px;\r\n      width: 55px;\r\n      font-weight: 500;\r\n      font-size: .8rem;\r\n      color: darken($grey, 5);\r\n      text-transform: lowercase;\r\n    }\r\n\r\n    li {\r\n      flex: 1; //border-right: solid 5px $border-color;\r\n      margin-right: var(--space-between-cols);\r\n\r\n      &.all-today {\r\n        background-color: #FEF4F4;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.dummy-row {\r\n  display: flex;\r\n  padding-left: 55px;\r\n\r\n  ul {\r\n    display: flex;\r\n    flex: 1;\r\n    margin: 0px;\r\n  }\r\n\r\n  li {\r\n    flex: 1;\r\n    height: 15px; //border-right: solid 5px $border-color;\r\n    margin-right: var(--space-between-cols);\r\n    border-bottom: solid 1px #e5e5e5;\r\n  }\r\n}\r\n\r\n.blocks {\r\n  display: flex;\r\n  position: relative;\r\n  height: 100%;\r\n\r\n  ul {\r\n    margin-top: 0px;\r\n  }\r\n\r\n  .building-blocks {\r\n    flex: 1;\r\n    margin-right: var(--space-between-cols);\r\n    margin-bottom: 0px;\r\n    display: flex;\r\n    flex-direction: column;\r\n  }\r\n\r\n  .calendar-blocks {\r\n    width: 100%;\r\n    display: flex;\r\n    position: relative;\r\n  }\r\n}\r\n\r\n.hours {\r\n  display: flex;\r\n  flex-direction: column;\r\n  color: darken($grey, 5);\r\n  font-weight: 500;\r\n  font-size: .85rem;\r\n  width: 55px;\r\n  height: 100%;\r\n  margin-bottom: 0px;\r\n\r\n  li {\r\n    // color: var(--hour-row-color);\r\n    color: #A9ABC7;\r\n    border-bottom: solid 1px $border-color;\r\n    padding-left: 8px;\r\n\r\n    span {\r\n      margin-top: -8px;\r\n    }\r\n\r\n    &:first-child span {\r\n      visibility: hidden;\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./kalendar-weekview.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./kalendar-weekview.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./kalendar-weekview.vue?vue&type=template&id=e911fe68&\"\nimport script from \"./kalendar-weekview.vue?vue&type=script&lang=js&\"\nexport * from \"./kalendar-weekview.vue?vue&type=script&lang=js&\"\nimport style0 from \"./kalendar-weekview.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}