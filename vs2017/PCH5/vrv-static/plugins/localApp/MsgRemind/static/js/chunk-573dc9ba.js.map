{"version":3,"sources":["webpack:///./src/components/kalendar/kalendar-cell.vue?eb1f","webpack:///./src/components/kalendar/kalendar-cell.vue?3fda","webpack:///src/components/kalendar/kalendar-cell.vue","webpack:///./src/components/kalendar/kalendar-cell.vue?3b4a","webpack:///./src/components/kalendar/kalendar-cell.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","cellData","staticClass","class","selected","index","cell_events","length","being_created","hasPopups","style","kalendar_options","on","$event","target","currentTarget","mouseMove","mouseDown","mouseUp","_e","staticRenderFns","props","inject","components","KalendarEvent","computed","completed_events","all_events","concat","constructedEvents","overlappingEvents","Object","keys","overlapValue","find","methods","creator","creating","past_event_creation","Date","now","value","console","log","overlap","$kalendar","closePopups","original_starting_cell","cloneObject","starting_cell","current_cell","ending_cell","$emit","payload","read_only","direction","going_down","resetCreator","component"],"mappings":"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","file":"static/js/chunk-573dc9ba.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./kalendar-cell.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./kalendar-cell.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.cellData.visible)?_c('li',{staticClass:\"kalendar-cell\",class:{\n    'selected': _vm.selected, \n    'is-an-hour': (_vm.index+1)%(60/10) === 0,\n    'has-events': _vm.cell_events && _vm.cell_events.length > 0,\n    'being-created': !!_vm.being_created || _vm.hasPopups\n  },style:((\"\\n    height: \" + (_vm.kalendar_options.cell_height) + \"px;\\n  \")),on:{\"mouseover\":function($event){if($event.target !== $event.currentTarget){ return null; }return _vm.mouseMove()},\"mousedown\":function($event){if($event.target !== $event.currentTarget){ return null; }return _vm.mouseDown()},\"mouseup\":function($event){return _vm.mouseUp()}}}):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <li v-if=\"cellData.visible\"\n      @mouseover.self=\"mouseMove()\"\n      @mousedown.self=\"mouseDown()\"\n      @mouseup=\"mouseUp()\"\n      class=\"kalendar-cell\"\n      :class=\"{\n      'selected': selected, \n      'is-an-hour': (index+1)%(60/10) === 0,\n      'has-events': cell_events && cell_events.length > 0,\n      'being-created': !!being_created || hasPopups\n    }\"\n      :style=\"`\n      height: ${kalendar_options.cell_height}px;\n    `\">\n    <!-- <KalendarEvent :style=\"`z-index: 10`\"\n                   v-if=\"cell_events && cell_events.length\"\n                   v-for=\"(event, eventIndex) in cell_events\"\n                   :event=\"event\"\n                   :key=\"eventIndex\"\n                   :total=\"cell_events.length\"\n                   :index=\"eventIndex\"\n                   :overlaps=\"overlapValue\" \n                   /> -->\n                   <!-- <KalendarEvent :style=\"`z-index: 10`\"\n                   v-if=\"cell_events && cell_events.length\"\n                   \n                   :total=\"cell_events.length\"\n                   \n                   :overlaps=\"overlapValue\" \n                   /> -->\n                   \n  </li>\n</template>\n<script>\nconst { cloneObject } = window.kalendarHelpers;\n\nexport default {\n  props: ['creator', 'index', 'cellData', 'constructedEvents', 'temporaryEvent'],\n  inject: ['kalendar_options'],\n  components: {\n    KalendarEvent: () => import('./kalendar-event.vue'),\n  },\n  computed: {\n    cell_events() {\n      let all_events = [];\n      if (this.completed_events) {\n        all_events = all_events.concat(this.completed_events);\n      }\n      if (this.being_created) {\n        all_events = all_events.concat(this.being_created);\n      }\n      return all_events;\n    },\n    completed_events() {\n      return this.constructedEvents &&\n        this.constructedEvents.hasOwnProperty(this.cellData.value) &&\n        this.constructedEvents[this.cellData.value];\n    },\n    being_created() {\n      return (this.temporaryEvent &&\n        this.temporaryEvent.start.value === this.cellData.value &&\n        this.temporaryEvent);\n    },\n    overlappingEvents() {\n      if (!this.constructedEvents || this.cell_events.length < 1) return [];\n      return Object.keys(this.constructedEvents)\n        .map(evKey => {\n          return this.constructedEvents[evKey]\n        })\n        .flat()\n        .filter(event => {\n          let cellDate = new Date(this.cellData.value);\n          let eventStarts = new Date(event.start.value);\n          let eventEnds = new Date(event.end.value);\n          return eventStarts < cellDate && eventEnds > cellDate;\n        });\n    },\n    overlapValue() {\n      let length = this.overlappingEvents.length;\n      return length > 2 ? 2 : length;\n    },\n    selected() {\n      return this.cell_events && this.cell_events.length > 0;\n    },\n    hasPopups() {\n      return this.selected && !!this.cell_events.find(ev => ev.status === 'popup-initiated');\n    }\n  },\n  methods: {\n    mouseDown() {\n      // user mouse got depressed while outside kalendar-cells\n      // came back in and clicked while the creator was on\n      if (!!this.creator.creating) {\n        this.mouseUp();\n        return;\n      }\n      let { read_only, overlap, past_event_creation } = this.kalendar_options;\n      if(read_only) return;\n\n      // if past_event_creation is set to false, check if cell value is\n      // before current time\n      if (past_event_creation === false) {\n        let now = kalendarHelpers.getLocaleTime(new Date());\n        if (new Date(now) > new Date(this.cellData.value)) {\n          this.mouseUp();\n          return;\n        }\n      }\n\n      // if overlap is set to false, prevent selection on top of\n      // other events\n      console.log('Cell events:', this.cell_events.length);\n      if (!overlap && this.cell_events.length > 0) return;\n\n      // close any open popups in the whole kalendar instance\n      // before starting a new one\n      this.$kalendar.closePopups();\n\n      // create a payload consisting of\n      // starting, current, ending and originalStarting cell\n      // starting, current and ending are self explanatory\n      // but originalStarting cell is required\n      // to determine the direction of the scroll/drag\n      let payload = {\n        creating: true,\n        original_starting_cell: cloneObject(this.cellData),\n        starting_cell: cloneObject(this.cellData),\n        current_cell: cloneObject(this.cellData),\n        ending_cell: cloneObject(this.cellData)\n      };\n      this.$emit('select', payload);\n    },\n    mouseMove() {\n      // same guards like in the mouseDown function\n      let { read_only, overlap } = this.kalendar_options;\n      if (read_only) return;\n      if (this.creator && !this.creator.creating) return;\n      let { starting_cell, original_starting_cell, creating } = this.creator;\n\n      // direction of scroll\n      let going_down = this.cellData.index >= starting_cell.index &&\n        starting_cell.index === original_starting_cell.index;\n\n      if (creating) {\n        let payload = {\n          ...this.creator,\n          current_cell: this.cellData,\n          ending_cell: this.cellData,\n          direction: going_down ? 'normal' : 'reverse'\n        };\n        this.$emit('select', payload);\n      }\n    },\n    mouseUp() {\n      if (this.kalendar_options.read_only) return;\n      if (this.creator.creating) {\n        this.$emit('initiatePopup');\n      }\n    },\n    resetCreator() {\n      this.$emit('reset');\n    },\n  },\n}\n</script>\n<style lang=\"scss\">\n$creator-bg: #34aadc;\n$creator-content: white;\n\nli {\n  font-size: 13px;\n  position: relative;\n}\n\n.created-events {\n  //width: 100%;\n  height: 100%;\n}\n\nul.building-blocks {\n  li {\n    z-index: 0;\n    border-bottom: dotted 1px var(--odd-cell-border-color);\n\n    &.first_of_appointment {\n      z-index: 1;\n      opacity: 1; //z-index:0;\n    }\n\n    &.is-an-hour {\n      border-bottom: solid 1px var(--table-cell-border-color);\n    }\n\n    &.has-events {\n      z-index: unset;\n    }\n\n    &.being-created {\n      z-index: 11;\n    }\n  }\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./kalendar-cell.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./kalendar-cell.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./kalendar-cell.vue?vue&type=template&id=6e0c2230&\"\nimport script from \"./kalendar-cell.vue?vue&type=script&lang=js&\"\nexport * from \"./kalendar-cell.vue?vue&type=script&lang=js&\"\nimport style0 from \"./kalendar-cell.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}